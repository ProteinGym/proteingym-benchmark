schema: '2.0'
stages:
  upload_to_s3:
    cmd:
    - aws s3 cp ../../../datasets/ s3://mango-pe/pg2-benchmark-training-data/datasets
      --recursive --exclude "*" --include "*.zip"
    - aws s3 cp ../../../models/ s3://mango-pe/pg2-benchmark-training-data/models
      --recursive --exclude "*" --include "*.toml"
    - echo "Upload completed at $(date)" > logs/s3_upload_complete.txt
    deps:
    - path: ../../../datasets/
      hash: md5
      md5: 2d7736631bb389bc4c1775cc7979f0a0.dir
      size: 105992
      nfiles: 7
    - path: ../../../models/
      hash: md5
      md5: d3ad141f0c54799e8f96bd640c686b79.dir
      size: 1381199847
      nfiles: 48393
    - path: logs/setup.txt
      hash: md5
      md5: c861b0c201d5e28492f5dff8fab634f5
      size: 26
    outs:
    - path: logs/s3_upload_complete.txt
      hash: md5
      md5: b841533c85ad082aeed20da08556f9cc
      size: 50
  setup:
    cmd:
    - mkdir -p logs output metric
    - echo "Created local directories" > logs/setup.txt
    outs:
    - path: logs/setup.txt
      hash: md5
      md5: c861b0c201d5e28492f5dff8fab634f5
      size: 26
