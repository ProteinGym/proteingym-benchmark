schema: '2.0'
stages:
  setup:
    cmd:
    - mkdir -p logs prediction metric
    - echo "Created local directories" > logs/setup.txt
    outs:
    - path: logs/setup.txt
      hash: md5
      md5: c861b0c201d5e28492f5dff8fab634f5
      size: 26
  create_training_job@dataset0-model0:
    cmd:
    - docker build -f $(dirname 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/pls/README.md)/Dockerfile
      -t pls:latest $(dirname 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/pls/README.md)
    - docker run --rm -v $(realpath 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata):/$(basename
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata)
      -v $(realpath 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/pls/README.md):/$(basename
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/pls/README.md)
      -v $(realpath prediction):/opt/program/output pls:latest train 
      --dataset-file /$(basename 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata)
      --model-card-file /$(basename 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/pls/README.md)
    - docker image prune -a -f
    deps:
    - path: ../../datasets/NEIME_2019.pgdata
      hash: md5
      md5: 2e339b71c6bfa894c9480407ccbf35fd
      size: 1331920
    - path: ../../models/pls/README.md
      hash: md5
      md5: cca0d906d548dd234a114b30cc30dfbb
      size: 1147
    - path: logs/setup.txt
      hash: md5
      md5: c861b0c201d5e28492f5dff8fab634f5
      size: 26
    outs:
    - path: prediction/NEIME_2019_pls.csv
      hash: md5
      md5: 3eed6c0182a8ae942233169dd11758e6
      size: 58523
  create_training_job@dataset0-model1:
    cmd:
    - docker build -f $(dirname 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/huggingface-regressor/README.md)/Dockerfile
      -t ritaregressor:latest $(dirname 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/huggingface-regressor/README.md)
    - docker run --rm -v $(realpath 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata):/$(basename
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata)
      -v $(realpath 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/huggingface-regressor/README.md):/$(basename
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/huggingface-regressor/README.md)
      -v $(realpath prediction):/opt/program/output ritaregressor:latest train 
      --dataset-file /$(basename 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/datasets/NEIME_2019.pgdata)
      --model-card-file /$(basename 
      /home/runner/work/proteingym-benchmark/proteingym-benchmark/models/huggingface-regressor/README.md)
    - docker image prune -a -f
    deps:
    - path: ../../datasets/NEIME_2019.pgdata
      hash: md5
      md5: 2e339b71c6bfa894c9480407ccbf35fd
      size: 1331920
    - path: ../../models/huggingface-regressor/README.md
      hash: md5
      md5: 5517fdda4a998db7fac2754fa274f16c
      size: 1404
    - path: logs/setup.txt
      hash: md5
      md5: c861b0c201d5e28492f5dff8fab634f5
      size: 26
    outs:
    - path: prediction/NEIME_2019_ritaregressor.csv
      hash: md5
      md5: 31f9e01b5e09b9d3c9bc50b4c2e9e955
      size: 34949
  calculate_metric@dataset0-model0:
    cmd:
    - METRICS=$(python -c "import yaml; data = 
      yaml.safe_load(open('default.yaml')); print(' '.join(data['metrics']))") 
      && python $(dvc root)/scripts/metric.py --prediction-path 
      prediction/NEIME_2019_pls.csv --metric-path metric/NEIME_2019_pls.json 
      --selected-metrics $METRICS
    deps:
    - path: prediction/NEIME_2019_pls.csv
      hash: md5
      md5: 3eed6c0182a8ae942233169dd11758e6
      size: 58523
    outs:
    - path: metric/NEIME_2019_pls.json
      hash: md5
      md5: cfbbcc64fe83db66495adcb74dc0b304
      size: 36
  calculate_metric@dataset0-model1:
    cmd:
    - METRICS=$(python -c "import yaml; data = 
      yaml.safe_load(open('default.yaml')); print(' '.join(data['metrics']))") 
      && python $(dvc root)/scripts/metric.py --prediction-path 
      prediction/NEIME_2019_ritaregressor.csv --metric-path 
      metric/NEIME_2019_ritaregressor.json --selected-metrics $METRICS
    deps:
    - path: prediction/NEIME_2019_ritaregressor.csv
      hash: md5
      md5: 31f9e01b5e09b9d3c9bc50b4c2e9e955
      size: 34949
    outs:
    - path: metric/NEIME_2019_ritaregressor.json
      hash: md5
      md5: 576672fbac7de54df28c2e63ffd04f1d
      size: 37
